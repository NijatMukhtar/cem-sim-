<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CEM — Coil Ring UI (rotor bloklu)</title>
<style>
  :root{
    /* Boyutlar */
    --ring: 560px;            /* dış halka çapı */
    --trackInset: 72px;       /* bobin yolunun dış kenardan içe uzaklığı  */
    --radius: calc(var(--ring)/2 - var(--trackInset)); /* bobinlerin gerçek yarıçapı */
    --coil-w: 56px; --coil-h: 28px;
    --disc: 310px;            /* orta disk çapı */
    --marker-w: 42px;         /* rotor bloğunun genişliği */
    --marker-h: 20px;         /* rotor bloğunun yüksekliği */
    --markerR: calc(var(--disc)/2 - 18px); /* bloğun diske göre yarıçapı */

    /* Renkler */
    --bg: #0a0b10; --panel:#0e1219; --border:#1a2130; --text:#e9eef6; --muted:#9aa6b2; --glow:#57ff9a;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background: radial-gradient(1100px 800px at 20% -10%, #111420, var(--bg) 60%);
    color:var(--text); font:14px/1.5 Inter,system-ui,-apple-system,Segoe UI,Arial;
    display:grid; place-items:center; padding:20px;
  }
  .stage{ width:min(1140px,96vw); display:grid; grid-template-columns: 1fr 340px; gap:28px; align-items:center; }
  @media (max-width:1020px){ .stage{grid-template-columns:1fr} }

  /* ——— GÖRSEL ALAN ——— */
  .arena{
    position:relative; width:var(--ring); height:var(--ring); margin:auto; border-radius:50%;
    background: radial-gradient(circle at 50% 50%, #0e1219 40%, #0c1119 41%), conic-gradient(#0f1521, #0f1724 40%, #101826);
    box-shadow: inset 0 0 60px #000a;
  }
  .ring-outer{ position:absolute; inset:10px; border-radius:50%; border:10px solid #ffffff14; box-shadow:0 0 0 1px #fff1 inset; opacity:.35; }
  .ring-track{ position:absolute; inset:var(--trackInset); border-radius:50%; border:10px solid #8bd0ff26; box-shadow:0 0 0 1px #ffffff10 inset; }
  .ring-dash{ position:absolute; inset:0; border-radius:50%; border:1px dashed #233042; opacity:.4 }

  /* Merkez disk */
  .disc{
    position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
    width:var(--disc); height:var(--disc); border-radius:50%;
    background: radial-gradient(circle at 35% 30%, #eef3fa 0%, #dde3ee 35%, #c6cfdb 65%, #b0bac8 100%);
    box-shadow: inset 8px -10px 18px #9aa3b1b0, inset -10px 12px 24px #ffffffaa, 0 16px 46px #0009;
  }
  .hub{
    position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
    width:74px; height:74px; border-radius:50%;
    background: radial-gradient(circle at 35% 35%, #808a98, #566171 60%, #465160);
    box-shadow: inset 0 0 0 6px #cdd3dc55, 0 8px 16px #0009;
  }
  .axle{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:16px; height:16px; border-radius:50%; background:#2a333f; box-shadow: inset 0 0 0 3px #111820; }

  /* Rotor üzerindeki dönen blok (iğne yerine) */
  .rotor-marker{
    position:absolute; left:50%; top:50%;
    width:var(--marker-w); height:var(--marker-h); border-radius:10px;
    transform-origin:50% calc(var(--markerR) + var(--marker-h)/2);
    transform: translate(-50%,-50%) rotate(0deg) translateY(calc(-1 * var(--markerR)));
    background: linear-gradient(180deg, #e6ecf5, #d7dfea);
    box-shadow: 0 2px 10px #0008, inset 0 0 0 1px #b7c1ce;
  }
  .rotor-marker::before, .rotor-marker::after{
    content:""; position:absolute; top:0; width:12px; height:100%; background:#9aa7b6;
  }
  .rotor-marker::before{ left:0; box-shadow: inset -2px 0 3px #0003 }
  .rotor-marker::after{ right:0; box-shadow: inset  2px 0 3px #0003 }

  /* ——— BOBİNLER ——— (trig ile yerleşim) */
  .coil{
    position:absolute; left:0; top:0; width:var(--coil-w); height:var(--coil-h);
    border-radius:8px; overflow:hidden; transform: translate(-50%,-50%) rotate(var(--rot));
    filter:brightness(.85) saturate(.9); box-shadow: 0 3px 12px #0008, 0 8px 24px #0005;
  }
  .coil .body{ position:absolute; inset:0; background:linear-gradient(180deg,#bd7b2a 0%, #a45d1b 50%, #bd7b2a 100%); }
  .coil .capL, .coil .capR{ position:absolute; top:0; width:10px; height:100%; background:#5f6b77; filter:brightness(1.1); }
  .coil .capL{ left:0;  box-shadow: inset -2px 0 3px #0005 }
  .coil .capR{ right:0; box-shadow: inset  2px 0 3px #0005 }
  .coil.active{ box-shadow: 0 3px 12px #0008, 0 0 32px var(--glow); filter:brightness(1) }
  .coil.active::after{ content:""; position:absolute; right:-12px; top:50%; width:12px; height:12px; margin-top:-6px; border-radius:50%; background:var(--glow); box-shadow:0 0 16px var(--glow); }

  /* ——— PANEL ——— */
  .panel{ background:var(--panel); border:1px solid var(--border); border-radius:14px; padding:14px; box-shadow:0 12px 36px #0007; backdrop-filter: blur(2px); }
  .panel h3{margin:4px 0 8px; font-size:15px; opacity:.95}
  .row{display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin:8px 0}
  button,select,input{ background:#0c1119; color:var(--text); border:1px solid var(--border); border-radius:10px; padding:8px 12px; font:600 13px/1 Inter,system-ui,Arial; }
  button{background:linear-gradient(180deg,#2b72ff,#1f59d1); border-color:#2a65e0; cursor:pointer}
  button.secondary{background:#121722}
  button:disabled{opacity:.6; cursor:not-allowed}
  input[type="number"]{width:92px}
  input[type="text"]{width:100%}
  .stats{font:12px/1.6 ui-monospace,
